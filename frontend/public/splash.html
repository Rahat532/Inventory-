<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Inventory Management</title>
    <style>
      :root { color-scheme: dark; }
      * { box-sizing: border-box; }
      html, body { height: 100%; margin: 0; }
      body {
        font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, sans-serif;
        color: #e5e7eb;
        background: radial-gradient(1200px 600px at 20% 10%, rgba(34,197,94,0.15), transparent),
                    radial-gradient(1200px 600px at 80% 20%, rgba(59,130,246,0.15), transparent),
                    linear-gradient(180deg, #0b1020 0%, #0f172a 100%);
      }
      .wrap { height: 100%; display: grid; place-items: center; padding: 24px; }
      .card {
        width: 560px; max-width: 92vw;
        padding: 28px 28px 22px;
        border-radius: 18px;
        background: rgba(17, 24, 39, 0.66);
        border: 1px solid rgba(99, 102, 241, 0.18);
        box-shadow: 0 30px 80px rgba(2,6,23,0.65), inset 0 1px 0 rgba(255,255,255,0.05);
        backdrop-filter: blur(14px);
        text-align: center;
        position: relative;
      }
      .badge {
        position: absolute; top: 14px; right: 14px;
        font-size: 12px; color: #a5b4fc; background: rgba(59,130,246,0.1);
        border: 1px solid rgba(99,102,241,0.25);
        padding: 4px 8px; border-radius: 999px;
      }
      .logo {
        width: 88px; height: 88px; margin: 2px auto 14px;
        border-radius: 24px; background: linear-gradient(145deg,#0b1220,#0e1726);
        display: grid; place-items: center;
        border: 1px solid rgba(148,163,184,0.25);
        box-shadow: 0 10px 20px rgba(2,6,23,0.5), inset 0 -8px 24px rgba(59,130,246,0.15);
        position: relative; overflow: hidden;
      }
      .logo::after {
        content: ""; position: absolute; inset: 0; pointer-events: none;
        background: radial-gradient(300px 120px at 30% 20%, rgba(59,130,246,0.15), transparent),
                    radial-gradient(300px 120px at 70% 90%, rgba(34,197,94,0.15), transparent);
        filter: blur(12px);
      }
      .logo svg { width: 46px; height: 46px; z-index: 1; }
      .title { margin: 8px 0 6px; font-size: 24px; font-weight: 700; letter-spacing: .2px; }
      .subtitle { margin: 0 0 18px; color: #94a3b8; font-size: 14px; }
      .controls { display: flex; gap: 12px; justify-content: center; align-items: center; }
      button {
        appearance: none; border: 0; background: linear-gradient(135deg,#2563eb,#22c55e);
        color: #fff; padding: 12px 18px; border-radius: 12px; font-weight: 700; letter-spacing: .2px;
        cursor: pointer; box-shadow: 0 10px 24px rgba(59,130,246,0.35);
        transition: transform .08s ease, filter .2s ease, box-shadow .2s ease;
      }
      button:hover { filter: brightness(1.05); box-shadow: 0 14px 28px rgba(59,130,246,0.45); }
      button:active { transform: translateY(1px); }
      button[disabled] { opacity: .75; cursor: default; }
      .progress { display: none; align-items: center; gap: 10px; margin-top: 14px; color: #9ca3af; font-size: 12px; }
      .dot { width: 6px; height: 6px; border-radius: 50%; background: #60a5fa; animation: blink 1.2s infinite ease-in-out; }
      .dot:nth-child(2) { animation-delay: .2s; }
      .dot:nth-child(3) { animation-delay: .4s; }
      @keyframes blink { 0%, 80%, 100% { opacity: .2 } 40% { opacity: 1 } }
      .footer { margin-top: 14px; font-size: 12px; color: #64748b; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="card">
        <div class="badge">Desktop • Offline</div>
        <div class="logo" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M3 7h18" stroke="#60a5fa" stroke-width="1.5" stroke-linecap="round"/>
            <rect x="4" y="7" width="16" height="11" rx="2" stroke="#a7f3d0" stroke-width="1.2"/>
            <path d="M8 11h4M8 14h7" stroke="#93c5fd" stroke-width="1.5" stroke-linecap="round"/>
            <circle cx="7" cy="5" r="2" fill="#22c55e"/>
          </svg>
        </div>
        <div class="title">Inventory Management</div>
        <div class="subtitle">Smart stock, sales and reports — right on your desktop</div>
        <div class="controls">
          <button id="startBtn" autofocus>Start</button>
        </div>
        <div id="progress" class="progress" role="status" aria-live="polite">
          <div class="dot"></div><div class="dot"></div><div class="dot"></div>
          <span>Starting services…</span>
        </div>
        <div id="version" class="footer">v1.0.0</div>
      </div>
    </div>

    <script>
      const { ipcRenderer } = require('electron');
      const startBtn = document.getElementById('startBtn');
      const progress = document.getElementById('progress');
      const versionEl = document.getElementById('version');
      startBtn.addEventListener('click', () => {
        startBtn.disabled = true;
        startBtn.textContent = 'Starting…';
        progress.style.display = 'flex';
        ipcRenderer.send('splash-start');
      });

      ipcRenderer.on('app-version', (_e, v) => {
        if (versionEl) versionEl.textContent = `v${v}`;
      });

      ipcRenderer.on('backend-error', (_e, message) => {
        // Show minimal error and re-enable start
        alert('Failed to start backend. ' + (message || 'Please check your Python/packaged backend.'));
        startBtn.disabled = false;
        startBtn.textContent = 'Start';
        progress.style.display = 'none';
      });
    </script>
  </body>
  </html>
